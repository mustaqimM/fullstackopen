(this.webpackJsonpanecdotes=this.webpackJsonpanecdotes||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(16),i=t.n(o),a=t(3),d=t(4),s=t.n(d),u="/api/persons",l=function(){return s.a.get(u).then((function(e){return e.data}))},j=function(e){return s.a.post(u,e).then((function(e){return e.data}))},b=function(e,n){return s.a.put("".concat(u,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){s.a.delete("".concat(u,"/").concat(e))},f=t(0),O=function(e){var n=e.personsToShow,t=e.handleDelete;return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsxs)("li",{children:[e.name," - ",e.number,Object(f.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.id)}))})})},m=function(e){var n=e.findPerson,t=e.handleFindPerson;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.addPerson,t=e.newName,c=e.handlePersonChange,r=e.newNumber,o=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:r,onChange:o})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.message,t={background:"grey",borderRadius:5,borderStyle:"solid",padding:10,marginBottom:10,fontSize:20};return""===n?null:n.includes("Added")?Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{style:{color:"green"},children:n})}):n.includes("Error")?Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{style:{color:"red"},children:n})}):n.includes("Updated")?Object(f.jsxs)("div",{style:t,children:["UP",Object(f.jsx)("div",{style:{color:"yellow"},children:n})]}):Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{children:n})})},p=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)("add a person"),i=Object(a.a)(o,2),d=i[0],s=i[1],u=Object(c.useState)("add a number"),p=Object(a.a)(u,2),g=p[0],w=p[1],y=Object(c.useState)(""),S=Object(a.a)(y,2),C=S[0],P=S[1],N=Object(c.useState)(""),k=Object(a.a)(N,2),E=k[0],T=k[1];Object(c.useEffect)((function(){l().then((function(e){return r(e)}))}),[]);var D=""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(v,{message:E}),Object(f.jsx)(m,{findPerson:C,handleFindPerson:function(e){P(e.target.value)}}),Object(f.jsx)("h3",{children:"Add a new"}),Object(f.jsx)(x,{addPerson:function(e){e.preventDefault();var n={name:d,number:g};if(t.find((function(e){return e.name===d&&e.number!==g}))){var c=t.find((function(e){return e.name===d}));window.confirm("".concat(d," is already added to the phonebook, replace the old number with a new one?"))&&b(c.id,n).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e}))),s(""),w(""),T("Changed ".concat(n.name)),console.log(E),setTimeout((function(){T("")}),2e3)})).catch((function(e){console.log(e),T("Error: ".concat(e.response.data.error)),setTimeout((function(){T("")}),2e3)}))}else j(n).then((function(e){r(t.concat(e)),s(""),w(""),T("Added: ".concat(e.name)),setTimeout((function(){T("")}),2e3)})).catch((function(e){console.log(e.response.data.error),T("Error: ".concat(e.response.data.error))}))},newName:d,handlePersonChange:function(e){s(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{personsToShow:D,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(h(e,n),r(t.filter((function(n){return n.id!==e}))))}})]})};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4c3eeaa1.chunk.js.map