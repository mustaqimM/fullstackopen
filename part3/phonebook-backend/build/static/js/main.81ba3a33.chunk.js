(this.webpackJsonpanecdotes=this.webpackJsonpanecdotes||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(16),i=t.n(o),a=t(3),d=t(4),u=t.n(d),s="/api/persons",l=function(){return u.a.get(s).then((function(e){return e.data}))},j=function(e){return u.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){u.a.delete("".concat(s,"/").concat(e))},f=t(0),m=function(e){var n=e.personsToShow,t=e.handleDelete;return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsxs)("li",{children:[e.name," - ",e.number,Object(f.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.id)}))})})},O=function(e){var n=e.findPerson,t=e.handleFindPerson;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.addPerson,t=e.newName,c=e.handlePersonChange,r=e.newNumber,o=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:r,onChange:o})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.message,t={background:"grey",borderRadius:5,borderStyle:"solid",padding:10,marginBottom:10,fontSize:20};return""===n?null:n.includes("Added")?Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{style:{color:"green"},children:n})}):n.includes("Error")?Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{style:{color:"red"},children:n})}):n.includes("Updated")?Object(f.jsxs)("div",{style:t,children:["UP",Object(f.jsx)("div",{style:{color:"yellow"},children:n})]}):Object(f.jsx)("div",{style:t,children:Object(f.jsx)("div",{children:n})})},p=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)("add a person"),i=Object(a.a)(o,2),d=i[0],u=i[1],s=Object(c.useState)("add a number"),p=Object(a.a)(s,2),g=p[0],w=p[1],y=Object(c.useState)(""),P=Object(a.a)(y,2),S=P[0],C=P[1],k=Object(c.useState)(""),N=Object(a.a)(k,2),T=N[0],D=N[1];Object(c.useEffect)((function(){l().then((function(e){return r(e)}))}),[]);var E=""===S?t:t.filter((function(e){return e.name.toLowerCase().includes(S)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(v,{message:T}),Object(f.jsx)(O,{findPerson:S,handleFindPerson:function(e){C(e.target.value)}}),Object(f.jsx)("h3",{children:"Add a new"}),Object(f.jsx)(x,{addPerson:function(e){e.preventDefault();var n={name:d,number:g};if(t.find((function(e){return e.name===d&&e.number===g})))alert("".concat(d," is already added to the phonebook"));else if(t.find((function(e){return e.name===d&&e.number!==g}))){var c=t.findIndex((function(e){return e.name===d&&e.number!==g}))+1;window.confirm("".concat(d," is already added to the phonebook, replace the old number with a new one?"))&&b(c,n).then((function(e){r(t.map((function(n){return n.id!==c?n:e}))),u(""),w(""),D("Changed ".concat(n.name)),console.log(T),setTimeout((function(){D("")}),2e3)})).catch((function(e){console.log(e),r(t.filter((function(e){return e.id!==c}))),D("Error: Person ".concat(n.name," has already been removed deleted")),setTimeout((function(){D("")}),2e3)}))}else j(n).then((function(e){r(t.concat(e)),u(""),w(""),D("Added: ".concat(e.name)),setTimeout((function(){D("")}),2e3)}))},newName:d,handlePersonChange:function(e){u(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(m,{personsToShow:E,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(h(e,n),r(t.filter((function(n){return n.id!==e}))))}})]})};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.81ba3a33.chunk.js.map